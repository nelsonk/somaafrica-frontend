<div class="container-fluid vh-100 d-flex justify-content-center align-items-center bg-primary-subtle" style="background-image: url(img/boy_with_book.jpg); background-size: contain; background-position: center;" >
    <div class="w-50">
        <div class="card p-4 overflow-y-auto shadow border-primary-subtle" style="max-height: 90vh;">
            <a routerLink="/" class="d-flex justify-content-center"><img src="img/logo.png"> </a>
            <hr>
            <div class="mb-3 text-center">
                <h3>Reset Password</h3>
            </div>
            <p> Hey!</p>
            <div class="alert" *ngIf="(resetPasswordForm.invalid || passwordMismatch || apiNotHealthy) && (resetPasswordForm.touched || resetPasswordForm.dirty)">
                <div class="alert alert-danger" *ngIf="apiNotHealthy">
                    API not healthy, try again later
                </div>
                <div class="alert alert-primary" *ngIf="passwordRequired" aria-live="assertive">
                    Password required
                </div>
                <div class="alert alert-danger" *ngIf="passwordMinLength" aria-live="assertive">
                    Password must be at least 8 characters long
                </div>
                <div class="alert alert-primary" *ngIf="passwordMismatch" aria-live="assertive">
                  Password mismatch
                </div>
            </div>
            <form class="form" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
                <div class="form-floating mb-3">
                    <input class="form-control form-control-lg" id="password" [type]="showPassword ? 'test' : 'password'" formControlName="password1" placeholder="Enter Password">
                    <label class="form-label" for="password">Password</label>
                    <button
                        type="button"
                        class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y"
                        (click)="showPassword = !showPassword"
                        tabindex="-1"
                        style="border: none; background: none;">
                        <!-- Change the icon based on visibility state -->
                        <fa-icon [icon]="showPassword ? faEyeSlash : faEye"></fa-icon>
                    </button>
                </div>
                <div class="form-floating mb-3">
                    <input class="form-control form-control-lg" [type]="showPassword2? 'text': 'password'" formControlName="password2" id="password2" placeholder="password">
                    <label class="form-label" for="password2">Confirm password</label>
                    <button
                        type="button"
                        class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y"
                        (click)="showPassword2 = !showPassword2"
                        tabindex="-1"
                        style="border: none; background: none;">
                        <!-- Change the icon based on visibility state -->
                        <fa-icon [icon]="showPassword2 ? faEyeSlash : faEye"></fa-icon>
                    </button>
                </div>
                <button class="btn btn-outline-primary w-100" type="submit" [hidden]="resetPasswordForm.invalid || passwordMismatch || apiNotHealthy">Reset
                    <div class="spinner-border" role="status" *ngIf="status == 'LOADING'" >
                        <span class="visually-hidden">Loading...</span>
                      </div>
                </button>
            </form>
            <hr>
            <a class="link-primary text-center" href="#" [routerLink]="['/login']">You've remembered the password? Login here</a>
        </div>
    </div>
</div>

